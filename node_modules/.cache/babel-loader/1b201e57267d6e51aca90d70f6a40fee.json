{"ast":null,"code":"import _objectSpread from \"/Users/evan/antdAdminPro/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/evan/antdAdminPro/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evan/antdAdminPro/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/evan/antdAdminPro/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evan/antdAdminPro/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/evan/antdAdminPro/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/es/layout/style\";\nimport _Layout from \"antd/es/layout\";\nvar _jsxFileName = \"/Users/evan/antdAdminPro/src/components/SiderCustom.jsx\";\n\n/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport routes from '../routes/config';\nimport SiderMenu from './SiderMenu';\nvar Sider = _Layout.Sider;\n\nvar SiderCustom =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SiderCustom, _Component);\n\n  function SiderCustom() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SiderCustom);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SiderCustom)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      mode: 'inline',\n      openKey: '',\n      selectedKey: '',\n      firstHide: true // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n\n    };\n\n    _this.menuClick = function (e) {\n      _this.setState({\n        selectedKey: e.key\n      });\n\n      var popoverHide = _this.props.popoverHide; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n\n      popoverHide && popoverHide();\n    };\n\n    _this.openMenu = function (v) {\n      _this.setState({\n        openKey: v[v.length - 1],\n        firstHide: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SiderCustom, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // this.setMenuOpen(this.props);\n      var state = SiderCustom.setMenuOpen(this.props);\n      this.setState(state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          selectedKey = _this$state.selectedKey,\n          openKey = _this$state.openKey,\n          firstHide = _this$state.firstHide,\n          collapsed = _this$state.collapsed;\n      return React.createElement(Sider, {\n        trigger: null,\n        breakpoint: \"lg\",\n        collapsed: collapsed,\n        style: {\n          overflowY: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(SiderMenu, {\n        menus: routes.menus,\n        onClick: this.menuClick,\n        mode: \"inline\",\n        selectedKeys: [selectedKey],\n        openKeys: firstHide ? null : [openKey],\n        onOpenChange: this.openMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"style\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"\\n                    #nprogress .spinner{\\n                        left: \".concat(collapsed ? '70px' : '206px', \";\\n                        right: 0 !important;\\n                    }\\n                    \")));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.collapsed !== state.collapsed) {\n        var state1 = SiderCustom.setMenuOpen(props);\n        var state2 = SiderCustom.onCollapse(props.collapsed);\n        return _objectSpread({}, state1, state2, {\n          firstHide: state.collapsed !== props.collapsed && props.collapsed,\n          // 两个不等时赋值props属性值否则为false\n          openKey: state.openKey || !props.collapsed && state1.openKey\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return SiderCustom;\n}(Component);\n\nSiderCustom.setMenuOpen = function (props) {\n  var pathname = props.location.pathname;\n  return {\n    openKey: pathname.substr(0, pathname.lastIndexOf('/')),\n    selectedKey: pathname\n  };\n};\n\nSiderCustom.onCollapse = function (collapsed) {\n  return {\n    collapsed: collapsed,\n    // firstHide: collapsed,\n    mode: collapsed ? 'vertical' : 'inline'\n  };\n};\n\nexport default withRouter(SiderCustom);","map":{"version":3,"sources":["/Users/evan/antdAdminPro/src/components/SiderCustom.jsx"],"names":["React","Component","withRouter","routes","SiderMenu","Sider","SiderCustom","state","mode","openKey","selectedKey","firstHide","menuClick","e","setState","key","popoverHide","props","openMenu","v","length","setMenuOpen","collapsed","overflowY","menus","state1","state2","onCollapse","pathname","location","substr","lastIndexOf"],"mappings":"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","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport { Layout } from 'antd';\nimport { withRouter } from 'react-router-dom';\nimport routes from '../routes/config';\nimport SiderMenu from './SiderMenu';\n\nconst { Sider } = Layout;\n\nclass SiderCustom extends Component {\n    static getDerivedStateFromProps (props, state) {\n        if (props.collapsed !== state.collapsed) {\n            const state1 = SiderCustom.setMenuOpen(props);\n            const state2 = SiderCustom.onCollapse(props.collapsed);\n            return {\n                ...state1,\n                ...state2,\n                firstHide: state.collapsed !== props.collapsed && props.collapsed, // 两个不等时赋值props属性值否则为false\n                openKey: state.openKey || (!props.collapsed && state1.openKey)\n            }\n        }\n        return null;\n    }\n    static setMenuOpen = props => {\n        const { pathname } = props.location;\n        return {\n            openKey: pathname.substr(0, pathname.lastIndexOf('/')),\n            selectedKey: pathname\n        };\n    };\n    static onCollapse = (collapsed) => {\n        return {\n            collapsed,\n            // firstHide: collapsed,\n            mode: collapsed ? 'vertical' : 'inline',\n        };\n    };\n    state = {\n        mode: 'inline',\n        openKey: '',\n        selectedKey: '',\n        firstHide: true, // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n    };\n    componentDidMount() {\n        // this.setMenuOpen(this.props);\n        const state = SiderCustom.setMenuOpen(this.props);\n        this.setState(state);\n    }\n    menuClick = e => {\n        this.setState({\n            selectedKey: e.key\n        });\n        const { popoverHide } = this.props; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n        popoverHide && popoverHide();\n    };\n    openMenu = v => {\n        this.setState({\n            openKey: v[v.length - 1],\n            firstHide: false,\n        })\n    };\n    render() {\n        const { selectedKey, openKey, firstHide, collapsed } = this.state;\n        return (\n            <Sider\n                trigger={null}\n                breakpoint=\"lg\"\n                collapsed={collapsed}\n                style={{ overflowY: 'auto' }}\n            >\n                <div className=\"logo\" />\n                <SiderMenu\n                    menus={routes.menus}\n                    onClick={this.menuClick}\n                    mode=\"inline\"\n                    selectedKeys={[selectedKey]}\n                    openKeys={firstHide ? null : [openKey]}\n                    onOpenChange={this.openMenu}\n                />\n                <style>\n                    {`\n                    #nprogress .spinner{\n                        left: ${collapsed ? '70px' : '206px'};\n                        right: 0 !important;\n                    }\n                    `}\n                </style>\n            </Sider>\n        )\n    }\n}\n\nexport default withRouter(SiderCustom);"]},"metadata":{},"sourceType":"module"}