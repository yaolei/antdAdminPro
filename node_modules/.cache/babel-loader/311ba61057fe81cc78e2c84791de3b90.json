{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react'), require('react-redux'), require('redux'), require('redux-thunk')) : typeof define === 'function' && define.amd ? define(['exports', 'react', 'react-redux', 'redux', 'redux-thunk'], factory) : (global = global || self, factory(global.howLongUntilLunch = {}, global.React, global.reactRedux, global.redux, global.thunk));\n})(this, function (exports, React, reactRedux, redux, thunk) {\n  'use strict';\n\n  React = React && React.hasOwnProperty('default') ? React['default'] : React;\n  thunk = thunk && thunk.hasOwnProperty('default') ? thunk['default'] : thunk;\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n        }));\n      }\n\n      ownKeys.forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  var REQUEST_DATA = 'REQUEST_DATA';\n  var RECEIVE_DATA = 'RECEIVE_DATA';\n\n  var handleData = function handleData() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      isFetching: true,\n      data: {}\n    };\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    switch (action.type) {\n      case REQUEST_DATA:\n        return _objectSpread({}, state, {\n          isFetching: true\n        });\n\n      case RECEIVE_DATA:\n        return _objectSpread({}, state, {\n          isFetching: false,\n          data: action.data,\n          timeStamp: Date.now()\n        });\n\n      default:\n        return _objectSpread({}, state);\n    }\n  };\n\n  var alitaState = function alitaState() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    switch (action.type) {\n      case RECEIVE_DATA:\n      case REQUEST_DATA:\n        return _objectSpread({}, state, _defineProperty({}, action.category, handleData(state[action.category], action)));\n\n      default:\n        return _objectSpread({}, state);\n    }\n  };\n\n  var reducer = redux.combineReducers({\n    alitaState: alitaState\n  });\n  var middleware = [thunk];\n  var store = redux.createStore(reducer, redux.applyMiddleware.apply(void 0, middleware));\n\n  var Provider = function Provider(_ref) {\n    var children = _ref.children;\n    return React.createElement(reactRedux.Provider, {\n      store: store\n    }, children);\n  };\n\n  var funcs;\n\n  var setConfig = function setConfig(apis) {\n    return funcs = apis;\n  };\n\n  var requestData = function requestData(category) {\n    return {\n      type: REQUEST_DATA,\n      category: category\n    };\n  };\n\n  var receiveData = function receiveData(data, category) {\n    return {\n      type: RECEIVE_DATA,\n      data: data,\n      category: category\n    };\n  };\n\n  var setAlitaState = function setAlitaState(_ref) {\n    var funcName = _ref.funcName,\n        params = _ref.params,\n        _ref$stateName = _ref.stateName,\n        stateName = _ref$stateName === void 0 ? funcName : _ref$stateName,\n        data = _ref.data;\n    return function (dispatch) {\n      if (!funcName && stateName) return dispatch(receiveData(data, stateName));\n      dispatch(requestData(stateName));\n      return funcs[funcName](params).then(function (res) {\n        return dispatch(receiveData(res, stateName));\n      });\n    };\n  };\n\n  var mapStateToProps = function mapStateToProps(_ref, alitaStateKeys) {\n    var alitaState = _ref.alitaState;\n    if (!alitaStateKeys) return {\n      alitaState: alitaState\n    };\n    var _transferObj = {};\n    alitaStateKeys.forEach(function (key) {\n      alitaState[key] && (_transferObj[key] = alitaState[key]);\n    });\n    return _objectSpread({}, _transferObj);\n  };\n\n  var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n      setAlitaState: redux.bindActionCreators(setAlitaState, dispatch)\n    };\n  };\n\n  var index = function index(alitaStateKeys) {\n    return reactRedux.connect(function (state) {\n      return mapStateToProps(state, alitaStateKeys);\n    }, mapDispatchToProps);\n  };\n\n  exports.AlitaProvider = Provider;\n  exports.connectAlita = index;\n  exports.setAlitaState = setAlitaState;\n  exports.setConfig = setConfig;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":null,"metadata":{},"sourceType":"script"}